# -*- coding: utf-8 -*-
"""cerkitaweb_st

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1iIo2jYmybNbwCAgMrNeyDTUf2UvEGonE
"""

import pandas as pd
import streamlit as st
import geopandas as gpd
import folium as fl
from folium.plugins import MarkerCluster
from streamlit_folium import st_folium

st.markdown(
    """
    <style>
    .stApp {
        background-color: #F6FFC9;
    }
    .logo {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 100px; /* TamaÃ±o */
    }
    .footer {
        bottom: 10px;
        width: 50%;
        text-align: center;
    }
    </style>
    """,
    unsafe_allow_html=True
)

data = {"nombre": ["SeÃ±or Bigotes ğŸ”", "Emolientando ğŸ¶" ,"Canchitas por Samuel ğŸ¿", "Camilon ğŸŒ­", "Morocho ğŸ«", "Yuquitas DoÃ±a Florinda ğŸ§"],
        "latitud": [-12.06861017065710, -12.068331914262530, -12.068928297764060, -12.069472609783920, -12.069817505441520, -12.070277921402420],
        "longitud": [-77.07747967098570, -77.07762186092730, -77.07765117725230, -77.07767675582580, -77.07770690533130, -77.07776229079620],
        "direccion": ["Av. Universitaria 123", "Jr. Libertad 456", "Calle San MartÃ­n 789", "Av. Universitaria 123", "Jr. Libertad 456", "Calle San MartÃ­n 789"],
        "tipo_comida": ["Hamburguesas", "Emoliente", "Canchita", "Salchipapas", "Mazamorra", "Yuquitas fritas"],
        "horarios": ["Lunes a Viernes: 12:00 - 22:00", "Lunes a SÃ¡bado: 11:00 - 20:00", "Lunes a Domingos: 15:00 - 22:00", "Lunes a Viernes: 12:00 - 22:00", "Lunes a SÃ¡bado: 11:00 - 20:00", "Lunes a Domingos: 11:00 - 22:00"]
        }

df = pd.DataFrame(data)
df.to_csv('vendedores.csv', index=False)

st.title("Â¡Bienvenido a *Cerkita Web*! ğŸ˜ƒ")
st.write("Descubre los mejores sabores locales cerca de la **PUCP** sin complicaciones. Disfruta de autÃ©ntica comida callejera en un ambiente acogedor y lleno de energÃ­a. Nuestro sitio web te ayudarÃ¡ a encontrar rÃ¡pidamente puestos de comida ambulante, ahorrÃ¡ndote tiempo y ofreciendo opciones para todos los bolsillos. Cada bocado cuenta una historia de tradiciÃ³n y pasiÃ³n culinaria. Â¡SumÃ©rgete en esta experiencia Ãºnica!")

st.write("### âœ… SuscrÃ­bete a nuestro Newsletter")
st.write("Â¡Mantente al tanto de nuestras promociones y novedades! SuscrÃ­bete a nuestro boletÃ­n y descubre las delicias callejeras cerca de la PUCP. Â¡No te lo pierdas!")

nombre = st.text_input("Ingresa tu nombre:")
email = st.text_input("Ingresa tu correo electrÃ³nico:")

if st.button("Suscribirse"):
    if email:
        try:
            df_correos = pd.read_csv('correos.csv')
            st.write("Archivo leÃ­do correctamente.")
        except FileNotFoundError:
            df_correos = pd.DataFrame(columns=['correo'])
            st.write("Archivo no encontrado, creando nuevo DataFrame.")

        if email not in df_correos['correo'].values:
            nuevo_registro = pd.DataFrame([[email]], columns=['correo'])
            df_correos = pd.concat([df_correos, nuevo_registro], ignore_index=True)
            df_correos.to_csv('correos.csv', index=False)
            st.success("Â¡Te has suscrito exitosamente! ğŸ¤—")
        else:
            st.warning("Ya estÃ¡s suscrito ğŸ‘ğŸ½")
    else:
        st.error("Por favor, ingresa un correo electrÃ³nico vÃ¡lido ğŸ˜”")

st.write("### CerkitaMap")
st.write("Ubica tus puestos de comida ambulantes favoritos de una manera fÃ¡cil")

user_location = [-12.069444444444, -77.079444444444]

df = pd.read_csv('vendedores.csv')

gdf = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.longitud, df.latitud))

m = fl.Map(location=[-12.069444444444, -77.079444444444], width="70%", height="70%", zoom_start=17)

fl.CircleMarker(user_location, radius=10, color='red', fill=True, fill_color='red').add_to(m)

marker_cluster = MarkerCluster().add_to(m)

for idx, row in df.iterrows():
    popup_text = f"<b>{row['nombre']}</b><br>{row['direccion']}<br>Comida: {row['tipo_comida']}<br>Horarios: {row['horarios']}"
    fl.Marker([row['latitud'], row['longitud']], popup=popup_text).add_to(marker_cluster)

st_folium(m)

promociones = [
    {"titulo": "SeÃ±or Bigotes ğŸ”", "descripcion": "**OFERTA EXCLUSIVA**: Mostrando la pÃ¡gina de *Cerkita Web* obtendrÃ¡s un 50% de descuento en toda nuestra carta de hamburguesas. AdemÃ¡s, si comprÃ¡s mÃ¡s de dos hamburguesas, obtendras una botella de refrescante chicha morada totalmente **GRATIS**. Â¡No dejes pasar esta oportunidad de disfrutar ğŸ˜‹ y ahorrar al mÃ¡ximo ğŸ¤‘ !", "imagen": "/Users/mirkoxoxo/Documents/Cerkita/seÃ±or_bigotes_final.png", "fecha": "03/07/2024"},
    {"titulo": "Canchitas por Samuel ğŸ¿", "descripcion": "**OFERTA EXCLUSIVA**: Mostrando la pÃ¡gina de *Cerkita Web* disfrutarÃ¡s de un 30% de descuento en todas nuestras deliciosas canchitas, tanto dulces como saladas. Â¡Aprovecha esta oportunidad ğŸ˜‰ para saborear tus favoritas a un precio de locura!", "imagen": "/Users/mirkoxoxo/Documents/Cerkita/canchitas_final.png", "fecha": "03/07/2024"},
    {"titulo": "CamilÃ³n ğŸŒ­", "descripcion": "**OFERTA EXCLUSIVA**: Mostrando la pÃ¡gina de *Cerkita Web* accederÃ¡s a un 20% de descuento en toda nuestra carta, la cual incluye hamburguesas jugosas, salchipapas crujientes, pollo broaster irresistible y mucho mÃ¡s. ğŸ˜± Â¡Disfruta de tu antojo favorito a un precio increÃ­ble! ğŸ˜", "imagen": "/Users/mirkoxoxo/Documents/Cerkita/camilÃ³n_final.png", "fecha": "03/07/2024"}
]

df_promociones = pd.DataFrame(promociones)

st.write("### Promociones Â¡ğŸ¤‘!")

for index, promocion in df_promociones.iterrows():
    st.image(promocion['imagen'], width=500)
    st.write(f"**{promocion['titulo']}**")
    st.write(promocion['descripcion'])
    st.write(f"*Fecha: {promocion['fecha']}*")
    st.write("---")

st.markdown(
    """
    <div class="footer">
        <img src="data:image/png;base64,{}" class="logo">
    </div>
    """.format(st.image("/Users/mirkoxoxo/Documents/Cerkita/cerkitaweb_logo.png", use_column_width=True)),
    unsafe_allow_html=True
)